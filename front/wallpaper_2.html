<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css\wallpaper_2_style.css" type="text/css">

  <script type="importmap">
    {
      "imports": {
        "@google/generative-ai": "https://esm.run/@google/generative-ai"
      }
    }
  </script>
  <script type="module">
    import { GoogleGenerativeAI } from "@google/generative-ai";

    // Busque sua CHAVE_API
    const API_KEY = "AIzaSyA5AMYE7E65njrbWTS9Ctd0PuCjwc9CXyA";
    // Lembrete: Isso deve ser apenas para testes locais

    // Acesse sua chave API (veja "Configurar sua chave API" acima)
    const genAI = new GoogleGenerativeAI(API_KEY);

    async function run(valor) { // Adicionei o parâmetro valor
      // Os modelos Gemini 1.5 são versáteis e funcionam com prompts de texto e multimídia
      const model = genAI.getGenerativeModel({ model: "gemini-1.5-flash"});

      const prompt = valor; // Use o parâmetro valor

      const result = await model.generateContent(prompt);
      const response = await result.response;
      const text = await response.text(); // Adicionei await aqui

      // Selecione o elemento com o ID "resultado"
      const resultadoElement = document.getElementById('p-respota');
      const newMessageElement = document.createElement('p');
      newMessageElement.textContent = text;
      resultadoElement.appendChild(newMessageElement);
    }

    // Adicionei a função enviar() aqui
    function enviar(event) {
      event.preventDefault(); // Add this line
      var valor = document.getElementById("quest").value;
      run(valor); // Chama a função run() e passa o valor como parâmetro
    }
    document.getElementById("confirmar").addEventListener("click", function(event) {
      enviar(event);
    });
  </script>
</head>
<header>
  <title>D&Gemini</title>
</header>

<body>
  <main>
    <nav>
      <!-- menu -->
      <div class="container-menu">
        <div class="icon-menu">
          <button><a href="wallpaper_2.html" target="_blank">
            <img class="menu" src="../img_vetor/menu.png" alt="">
          </a>
          </button>
        </div>
        <div class="nome-img">
          <h1 id="h1-nc">Nome da Campanha</h1>
          <img src="../img_vetor/LogoDG.png" alt="">
        </div>
      </div>
      <!-- menu -->
      <!-- Barra -->
      <div class="aside-box">
        <!-- icones e nome -->
        <ul class="character-ul">
          <li>
              <h2>Nome</h2>
            </li>
            <li class="icon">
              <img src="../img_vetor/vetor-chat.png" alt="">
            </li>
            <li class="icon">
              <img src="../img_vetor/vetor-more-options.png" alt="">
            </li>
        </ul>    
            <!-- Inicio dos 1 status -->
            <div class="status">
              <img src="../img_vetor/p1.png" alt="">
              <ul>
                  <li>
                    <span>
                      Vida
                    </span>
                    <hr>
                  </li>
                  <li>
                    <span>
                      Destreza
                    </span>
                    <hr>
                  </li><li>
                    <span>
                      Vigor
                    </span>
                    <hr>
                  </li><li>
                    <span>
                      Mentalidade
                    </span>
                    <hr>
                  </li>
              </ul>
            </div>
            </li>
          </li>
          <!-- /character 1 -->
          <!-- character 2 -->
          <ul class="character-ul">
            <li>
                <h2>Nome</h2>
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-chat.png" alt="">
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-more-options.png" alt="">
              </li>
          </ul>    
              <!-- Inicio dos 1 status -->
              <div class="status">
                <img src="../img_vetor/p2.png" alt="">
                <ul>
                    <li>
                      <span>
                        Vida
                      </span>
                      <hr>
                    </li>
                    <li>
                      <span>
                        Destreza
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Vigor
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Mentalidade
                      </span>
                      <hr>
                    </li>
                </ul>
              </div>
              </li>
            </li>
          <!--character 2 -->
          <!-- character 3 -->
          <ul class="character-ul">
            <li>
                <h2>Nome</h2>
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-chat.png" alt="">
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-more-options.png" alt="">
              </li>
          </ul>    
              <!-- Inicio dos 1 status -->
              <div class="status">
                <img src="../img_vetor/p3.png" alt="">
                <ul>
                    <li>
                      <span>
                        Vida
                      </span>
                      <hr>
                    </li>
                    <li>
                      <span>
                        Destreza
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Vigor
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Mentalidade
                      </span>
                      <hr>
                    </li>
                </ul>
              </div>
              </li>
            </li>
          <!-- /character 3 -->
          <!-- character 4 -->
          <ul class="character-ul">
            <li>
                <h2>Nome</h2>
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-chat.png" alt="">
              </li>
              <li class="icon">
                <img src="../img_vetor/vetor-more-options.png" alt="">
              </li>
          </ul>    
              <!-- Inicio dos 1 status -->
              <div class="status">
                <img src="../img_vetor/p4.png" alt="">
                <ul>
                    <li>
                      <span>
                        Vida
                      </span>
                      <hr>
                    </li>
                    <li>
                      <span>
                        Destreza
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Vigor
                      </span>
                      <hr>
                    </li><li>
                      <span>
                        Mentalidade
                      </span>
                      <hr>
                    </li>
                </ul>
              </div>
              </li>
            </li>
        </ul>
      </div>
    </nav>

    <section class="section1">
      <div class="menu-perfil">
        <h3>Felipe</h3>
        <span>
          <img src="../img_vetor/frame-perfil.png" alt="">
        </span>
      </div> 
      <div class="section1-container">
        <div class="p-respota" id="p-respota">
          <p id="resultado">
            No coração de uma floresta medieval, sob a tênue luz da lua crescente, uma feroz batalha acontecia entre uma solitária cavaleira e um guerreiro corpulento e blindado. A cavaleira, vestida em reluzente armadura prateada, empunhava uma espada cintilante que crepitava com energia mágica. Seu oponente, um monstruoso cavaleiro envolto em aço negro, contra-atacava com uma enorme espada larga. Faíscas voavam à medida que suas lâminas colidiam, o som ecoando pelas árvores silenciosas.
          </p>
        </div>
        <div class="area-pergunta">
        <form action="">
          <label for="quest">
          <input class="quest" type="text" id="quest" name="quest" >
          <button id="confirmar">
            <img src="../img_vetor/send.svg" alt="">
          </button>
          </label>
        </form>
        </div>
      </div>
      </div>
    </section>
  </main>
</body>
</html>